{
  "info": {
    "name": "ClothesStore API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Postman collection for ClothesStore API. Set environment variable base_url (e.g. http://localhost:3000). Login request will store token in environment variable 'token'."
  },
  "item": [
    {
      "name": "Auth / Login",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\":\"admin\",\n  \"password\":\"admin123\"\n}"
        },
        "url": { "raw": "{{base_url}}/api/auth/login", "host": ["{{base_url}}"], "path": ["api","auth","login"] }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "const json = pm.response.json();",
              "if (json.token) { pm.environment.set('token', json.token); }",
              "pm.test('status is 200', () => pm.response.to.have.status(200));"
            ]
          }
        }
      ]
    },
    {
      "name": "Auth / Register",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": { "mode": "raw", "raw": "{\n  \"username\":\"newuser\",\n  \"password\":\"pass123\",\n  \"email\":\"new@example.com\",\n  \"role_id\":3\n}" },
        "url": { "raw": "{{base_url}}/api/auth/register", "host": ["{{base_url}}"], "path": ["api","auth","register"] }
      }
    },

    { "name": "Products / List", "request": { "method": "GET", "url": { "raw": "{{base_url}}/api/products", "host": ["{{base_url}}"], "path": ["api","products"] } } },

    {
      "name": "Products / Create",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Authorization", "value": "Bearer {{token}}" }
        ],
        "body": { "mode": "raw", "raw": "{\n  \"name\":\"Test Product\",\n  \"description\":\"Desc\",\n  \"category_id\":1,\n  \"brand_id\":1,\n  \"gender_id\":1,\n  \"default_price\":19.99\n}" },
        "url": { "raw": "{{base_url}}/api/products", "host": ["{{base_url}}"], "path": ["api","products"] }
      }
    },

    {
      "name": "Products / Get by id",
      "request": { "method": "GET", "url": { "raw": "{{base_url}}/api/products/:id", "host": ["{{base_url}}"], "path": ["api","products",":id"] } },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Products / Update",
      "request": {
        "method": "PUT",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"name\":\"Updated Name\" }" },
        "url": { "raw": "{{base_url}}/api/products/:id", "host": ["{{base_url}}"], "path": ["api","products",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Products / Delete",
      "request": {
        "method": "DELETE",
        "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
        "url": { "raw": "{{base_url}}/api/products/:id", "host": ["{{base_url}}"], "path": ["api","products",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },

    {
      "name": "Products / Variant Quantity",
      "request": {
        "method": "GET",
        "url": { "raw": "{{base_url}}/api/products/:id/quantity", "host": ["{{base_url}}"], "path": ["api","products",":id","quantity"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Products / Product Stock",
      "request": {
        "method": "GET",
        "url": { "raw": "{{base_url}}/api/products/:id/stock", "host": ["{{base_url}}"], "path": ["api","products",":id","stock"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },

    {
      "name": "Products / Search",
      "request": {
        "method": "GET",
        "url": { "raw": "{{base_url}}/api/products/search?gender=Men&category=Shirts&price_min=10&price_max=100", "host": ["{{base_url}}"], "path": ["api","products","search"], "query": [{ "key": "gender", "value": "Men" }, { "key": "category", "value": "Shirts" }, { "key": "price_min", "value": "10" }, { "key": "price_max", "value": "100" }] }
      }
    },

    {
      "name": "Categories / List",
      "request": { "method": "GET", "url": { "raw": "{{base_url}}/api/categories", "host": ["{{base_url}}"], "path": ["api","categories"] } }
    },
    {
      "name": "Categories / Create",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"name\":\"Shirts\", \"description\":\"Category\" }" },
        "url": { "raw": "{{base_url}}/api/categories", "host": ["{{base_url}}"], "path": ["api","categories"] }
      }
    },
    {
      "name": "Categories / Update",
      "request": {
        "method": "PUT",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"name\":\"Updated\" }" },
        "url": { "raw": "{{base_url}}/api/categories/:id", "host": ["{{base_url}}"], "path": ["api","categories",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Categories / Delete",
      "request": {
        "method": "DELETE",
        "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
        "url": { "raw": "{{base_url}}/api/categories/:id", "host": ["{{base_url}}"], "path": ["api","categories",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },

    {
      "name": "Discounts / List",
      "request": { "method": "GET", "url": { "raw": "{{base_url}}/api/discount", "host": ["{{base_url}}"], "path": ["api","discount"] } }
    },
    {
      "name": "Discounts / Create",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"name\":\"Summer 10%\",\"type\":\"percent\",\"value\":10,\"product_ids\":[1,2] }" },
        "url": { "raw": "{{base_url}}/api/discount", "host": ["{{base_url}}"], "path": ["api","discount"] }
      }
    },
    {
      "name": "Discounts / Get",
      "request": { "method": "GET", "url": { "raw": "{{base_url}}/api/discount/:id", "host": ["{{base_url}}"], "path": ["api","discount",":id"] } },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Discounts / Update",
      "request": {
        "method": "PUT",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"active\": false }" },
        "url": { "raw": "{{base_url}}/api/discount/:id", "host": ["{{base_url}}"], "path": ["api","discount",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Discounts / Delete",
      "request": {
        "method": "DELETE",
        "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
        "url": { "raw": "{{base_url}}/api/discount/:id", "host": ["{{base_url}}"], "path": ["api","discount",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },

    {
      "name": "Orders / List",
      "request": { "method": "GET", "url": { "raw": "{{base_url}}/api/orders", "host": ["{{base_url}}"], "path": ["api","orders"] } }
    },
    {
      "name": "Orders / Create",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"client_id\":1,\n  \"created_by\":1,\n  \"payment_method\":\"card\",\n  \"items\":[{\"product_variant_id\":1,\"unit_price\":25.0,\"quantity\":2}]\n}"
        },
        "url": { "raw": "{{base_url}}/api/orders", "host": ["{{base_url}}"], "path": ["api","orders"] }
      }
    },
    {
      "name": "Orders / Update Status",
      "request": {
        "method": "PUT",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"status\":\"confirmed\" }" },
        "url": { "raw": "{{base_url}}/api/orders/:id", "host": ["{{base_url}}"], "path": ["api","orders",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },

    {
      "name": "Reports / Daily",
      "request": { "method": "GET", "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }], "url": { "raw": "{{base_url}}/api/reports/daily", "host": ["{{base_url}}"], "path": ["api","reports","daily"] } }
    },
    {
      "name": "Reports / Monthly",
      "request": { "method": "GET", "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }], "url": { "raw": "{{base_url}}/api/reports/monthly", "host": ["{{base_url}}"], "path": ["api","reports","monthly"] } }
    },
    {
      "name": "Reports / Top Products",
      "request": { "method": "GET", "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }], "url": { "raw": "{{base_url}}/api/reports/top-products", "host": ["{{base_url}}"], "path": ["api","reports","top-products"] } }
    },

    {
      "name": "Users / List",
      "request": { "method": "GET", "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }], "url": { "raw": "{{base_url}}/api/users", "host": ["{{base_url}}"], "path": ["api","users"] } }
    },
    {
      "name": "Users / Create",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"username\":\"user1\",\"password\":\"pass1\",\"email\":\"u1@example.com\",\"role_id\":3 }" },
        "url": { "raw": "{{base_url}}/api/users", "host": ["{{base_url}}"], "path": ["api","users"] }
      }
    },
    {
      "name": "Users / Get",
      "request": { "method": "GET", "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }], "url": { "raw": "{{base_url}}/api/users/:id", "host": ["{{base_url}}"], "path": ["api","users",":id"] } },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Users / Update",
      "request": {
        "method": "PUT",
        "header": [{ "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{token}}" }],
        "body": { "mode": "raw", "raw": "{ \"password\":\"newpass\" }" },
        "url": { "raw": "{{base_url}}/api/users/:id", "host": ["{{base_url}}"], "path": ["api","users",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    },
    {
      "name": "Users / Delete",
      "request": {
        "method": "DELETE",
        "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
        "url": { "raw": "{{base_url}}/api/users/:id", "host": ["{{base_url}}"], "path": ["api","users",":id"] }
      },
      "variable": [{ "key": "id", "value": "1" }]
    }
  ]
}